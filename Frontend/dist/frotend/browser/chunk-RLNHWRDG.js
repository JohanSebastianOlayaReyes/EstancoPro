import{Ha as i,d as r,j as t,m as o,p as a,xa as h}from"./chunk-AOLGXRAL.js";var p=class n{constructor(e){this.http=e;this.loadOpenSession()}API_URL=`${i.apiUrl}/CashSession`;MOVEMENT_URL=`${i.apiUrl}/CashMovement`;currentSessionSubject=new r(null);currentSession$=this.currentSessionSubject.asObservable();loadOpenSession(){this.getOpenSession().subscribe({next:e=>this.currentSessionSubject.next(e),error:()=>this.currentSessionSubject.next(null)})}get currentSession(){return this.currentSessionSubject.value}get hasOpenSession(){return this.currentSession!==null}openSession(e){return this.http.post(`${this.API_URL}/open`,e).pipe(t(s=>this.currentSessionSubject.next(s)))}openSessionSimple(e){return this.http.post(`${this.API_URL}/open`,{openingAmount:e}).pipe(t(s=>this.currentSessionSubject.next(s)))}closeSession(e,s){return this.http.post(`${this.API_URL}/${e}/close`,s).pipe(t(()=>this.currentSessionSubject.next(null)))}getOpenSession(){return this.http.get(`${this.API_URL}/open`)}getSessionBalance(e){return this.http.get(`${this.API_URL}/${e}/balance`)}getByDateRange(e,s){return this.http.get(`${this.API_URL}/by-date-range`,{params:{from:e,to:s}})}getAllSessions(){return this.http.get(this.API_URL)}getAll(){return this.http.get(this.API_URL)}create(e){return this.http.post(this.API_URL,e)}open(e){return this.http.post(`${this.API_URL}/${e}/open`,{}).pipe(t(s=>this.currentSessionSubject.next(s)))}close(e,s){return this.http.post(`${this.API_URL}/${e}/close`,s).pipe(t(()=>this.currentSessionSubject.next(null)))}update(e,s){return this.http.put(`${this.API_URL}/${e}`,s)}getMovements(){return this.http.get(this.MOVEMENT_URL)}createMovement(e){return this.http.post(this.MOVEMENT_URL,e)}static \u0275fac=function(s){return new(s||n)(a(h))};static \u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"})};export{p as a};
